(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},21:function(e,t,a){},23:function(e,t,a){},25:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),s=a.n(r),c=(a(21),a(5)),l=a(6),i=a(8),h=a(7),u=a(9),f=a(33),d=a(31),m=(a(23),a(25),a(12)),v="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:p},b=function(){return fetch("".concat(v,"/books"),{headers:k}).then(function(e){return e.json()}).then(function(e){return e.books})},g=function(e,t){return fetch("".concat(v,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},y=function(e){return fetch("".concat(v,"/search"),{method:"POST",headers:Object(m.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={isUpdating:!1},a.changeShelf=function(e){a.props.onChangeShelf(a.props.book,e),a.setState({isUpdating:!0})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({isUpdating:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:this.state.isUpdating?"book-shelf-changer loading":"book-shelf-changer"},o.a.createElement("select",{value:this.props.book.shelf,onChange:function(t){return e.changeShelf(t)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")),this.state.isUpdating&&o.a.createElement("div",{className:"loader-two"}))}}]),t}(n.Component);var S=function(e){var t=e.book,a=e.onChangeShelf,n=void 0===t.imageLinks?"https://dummyimage.com/".concat(128,"x").concat(188,"/000/fff.png&text=No+Image"):t.imageLinks.thumbnail,r=void 0===t.authors?"Unknown Author":t.authors.join(", ");return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(".concat(n,")")}}),o.a.createElement(E,{book:t,onChangeShelf:a})),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},r)))};var N=function(e){return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},e.shelfName),o.a.createElement("div",{className:"bookshelf-books"},e.appLoaded?e.fBooks.length<=0?o.a.createElement("h3",{className:"bookshelf-status"},"Empty Shelf"):o.a.createElement("ol",{className:"books-grid"},e.fBooks.map(function(t){return o.a.createElement(S,{key:t.id,book:t,onChangeShelf:e.onChangeShelf})})):o.a.createElement("div",{className:"loader"})))},w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",sBooks:[],isSearching:!1,error:!1},a.updateQuery=function(e){a.setState({query:e.target.value},function(){a.searchBooks(e)})},a.searchBooks=function(e){var t=a.state.query;t?(a.setState({isSearching:!0}),y(t).then(function(e){e.error?a.setState({sBooks:[],isSearching:!1,error:!0}):e&&(a.setState({error:!1}),a.updateBooks(e))})):a.setState({sBooks:[]})},a.updateBooks=function(e){var t=a.props.shelvedBooks,n=!0,o=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;l.shelf="none";var i=!0,h=!1,u=void 0;try{for(var f,d=t[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var m=f.value;l.id===m.id&&(l.shelf=m.shelf)}}catch(v){h=!0,u=v}finally{try{i||null==d.return||d.return()}finally{if(h)throw u}}}}catch(v){o=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}a.setState({sBooks:e,isSearching:!1})},a.updateBook=function(e){var t=a.state.sBooks,n=!0,o=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,i=!0,h=!1,u=void 0;try{for(var f,d=e[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var m=f.value;l.id===m.id&&(l.shelf=m.shelf)}}catch(v){h=!0,u=v}finally{try{i||null==d.return||d.return()}finally{if(h)throw u}}}}catch(v){o=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}a.setState({sBooks:t})},a.changeShelf=function(e,t){a.props.onChangeShelf(e,t).then(function(e){return a.updateBook(e)})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.sBooks;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(d.a,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",value:this.state.query,placeholder:"Search by title or author",onChange:function(t){return e.updateQuery(t)}}))),this.state.error&&!this.state.isSearching&&o.a.createElement("div",{className:"search-books-results center"},o.a.createElement("h3",null,"No Result Found")),this.state.isSearching?o.a.createElement("div",{className:"loader"}):o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},t.map(function(t){return o.a.createElement(S,{key:t.id,book:t,onChangeShelf:e.changeShelf})}))))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],isLoaded:!1},a.changeShelf=function(e,t){return new Promise(function(n){g(e,t.target.value).then(function(e){b().then(function(e){a.setState({books:e},n(e))})})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b().then(function(t){e.setState({books:t,isLoaded:!0})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoaded,n=t.books;return o.a.createElement("div",{className:"app"},o.a.createElement(f.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(N,{key:"Currently Reading",shelfName:"Currently Reading",appLoaded:a,fBooks:n.filter(function(e){return"currentlyReading"===e.shelf}),onChangeShelf:e.changeShelf}),o.a.createElement(N,{key:"Want to Read",shelfName:"Want to Read",appLoaded:a,fBooks:n.filter(function(e){return"wantToRead"===e.shelf}),onChangeShelf:e.changeShelf}),o.a.createElement(N,{key:"Read",shelfName:"Read",appLoaded:a,fBooks:n.filter(function(e){return"read"===e.shelf}),onChangeShelf:e.changeShelf}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(d.a,{to:"/search"},"Add Book")))}}),o.a.createElement(f.a,{path:"/search",render:function(){return o.a.createElement(w,{shelvedBooks:n,onChangeShelf:e.changeShelf})}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(32);s.a.render(o.a.createElement(B.a,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.aab4edb9.chunk.js.map